{% extends "mvtemp/base.html" %}

{% block content %}
{% load static %}
	<link href=" {% static "mvtemp/css/index.css" %}" rel="stylesheet">
	<link href=" {% static "mvtemp/css/global.css" %} " rel="stylesheet">

<section id="center" class="center_home">
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
     <div class="carousel-inner">
       <div class="carousel-item active mb-5">
         <img src="{{ mv.mv_image.url }}" class="d-block w-100" style="height: 100vh;" alt="...">
         <div class="carousel-caption d-md-block">
          <h1 class="font_60">{{mv.mv_name}}</h1>
          <h6 class="mt-3">
            4.5 (Imdb)      Year : 2022

           <p class="mb-2 mt-2"><span class="me-1 fw-bold">Genres:</span></p>
           <div class="text-start mt-1">
           {% for genre in mv.mv_genres.all %}
           <a class="bg_red p-2 pe-4 ps-4 my-1  text-white d-inline-block" href="#">{{ genre }} </a>
           {% endfor %}
           </div>
          </h6>
          <p class="mt-3 w-100">{{mv.mv_desc}}</p>
          <p class="mb-2"><span class="col_red me-1 fw-bold">Starring:</span>
            {% for stars in new %}
              {{ stars }},
            {% endfor %}
          </p>
          <p><span class="col_red me-1 fw-bold">Runtime:</span>1hr 30mins</p>	
          <h6 class="mt-4"><a class="button" href="#"><i class="fa fa-play-circle align-middle me-1"></i> Watch Trailer</a></h6>
          <button class="button btn rounded-0 fw-bold mb-5" id="fav-add" value="{{ mv.id }}">Add To Favorite</button>
         </div>
       </div>
     </div>
   </div>
   </section>

<script>
  $(document).ready(function(){
    $("#fav-add").click(function(e){
      e.preventDefault();
      $.ajax({
        type:"POST",
        url:'{% url 'fav_add' %}',
        data:{
          fav_id:$("#fav-add").val(),
          csrfmiddlewaretoken:'{{ csrf_token }}',
          action:'post',
        },
        success:function(json){
          console.log("Succesful")
        },
        error: function(xhr,errmsg,err){
          console.log("Unsuccesful")
        },
      })
    })
  })

</script>

{% endblock content %}